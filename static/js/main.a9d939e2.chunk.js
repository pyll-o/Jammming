(this.webpackJsonpjammming_two=this.webpackJsonpjammming_two||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,a){e.exports=a(33)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var s=a(0),i=a.n(s),l=a(12),n=a.n(l),r=(a(19),a(13)),c=a(5),o=a(6),h=a(2),u=a(8),y=a(7),d=(a(20),a(21),a(4)),p=a(3);function m(e){var t=e.searchPhrase,a=e.handleSearchChange,s=e.handleClick,l=e.playlists,n=e.hasCheckedForPlaylists,r=i.a.createElement(d.a,{icon:p.h,size:"2x"}),c=i.a.createElement(d.a,{icon:p.c,size:"2x"});return i.a.createElement("div",{className:"SearchBar"},i.a.createElement("input",{placeholder:"Enter A Song, Album, or Artist",value:t,onChange:a}),i.a.createElement("button",{className:t||0===l.length&&!n?"SearchButton":"SearchButton-inactive",onClick:t||0===l.length&&!n?s:null},t||l.length>0||n?r:c))}a(27),a(28),a(29);function k(e){var t=e.track,a=e.isInPlaylist,s=e.handleClick,l=e.play,n=e.isPlayed,r=e.isTrackPlayed,c=e.titleLink,o=e.artistLink,h=e.albumLink,u=i.a.createElement(d.a,{icon:p.e,size:"xs"}),y=i.a.createElement(d.a,{icon:p.d,size:"xs"});return i.a.createElement("div",{className:"Track"},i.a.createElement("div",{className:"Track-information"},i.a.createElement("h3",{className:"Track-link",onClick:c},t.title),i.a.createElement("p",null,i.a.createElement("span",{className:"Track-link",onClick:o},t.artist)," | ",i.a.createElement("span",{className:"Track-link",onClick:h},t.album))),i.a.createElement("audio",{loop:!0,id:t.id,src:t.preview?t.preview:"https://bigsoundbank.com/UPLOAD/mp3/0".concat(Math.floor(900*Math.random()+100),".mp3")},"Your browser does not support the audio element"),i.a.createElement("button",{className:n||!r?t.preview?"Track-action":"Track-action red":"Track-action-disabled",onClick:n||!r?l:null},n?y:u),i.a.createElement("button",{className:t.doubledInPlaylist&&!a?"Track-action-disabled":"Track-action",onClick:s},a?"-":"+"))}var P=function(e){Object(u.a)(a,e);var t=Object(y.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={isPlayed:!1},s.handleClick=s.handleClick.bind(Object(h.a)(s)),s.play=s.play.bind(Object(h.a)(s)),s.titleLink=s.titleLink.bind(Object(h.a)(s)),s.albumLink=s.albumLink.bind(Object(h.a)(s)),s.artistLink=s.artistLink.bind(Object(h.a)(s)),s}return Object(o.a)(a,[{key:"handleClick",value:function(){this.props.isInPlaylist?this.props.removeTrack(this.props.track):this.props.addTrack(this.props.track)}},{key:"play",value:function(){var e=this;this.state.isPlayed?this.setState({isPlayed:!1},(function(){e.props.pauseTrack(e.props.track)})):this.setState({isPlayed:!0},(function(){e.props.playTrack(e.props.track)}))}},{key:"titleLink",value:function(){window.open(this.props.track.url)}},{key:"artistLink",value:function(){window.open(this.props.track.artistUrl)}},{key:"albumLink",value:function(){window.open(this.props.track.albumUrl)}},{key:"render",value:function(){return i.a.createElement(k,{track:this.props.track,isInPlaylist:this.props.isInPlaylist,handleClick:this.handleClick,play:this.play,isPlayed:this.state.isPlayed,isTrackPlayed:this.props.isTrackPlayed,titleLink:this.titleLink,artistLink:this.artistLink,albumLink:this.albumLink})}},{key:"componentDidUpdate",value:function(e,t){var a=this;e.isTrackPlayed!==this.props.isTrackPlayed&&t.isPlayed&&e.isTrackPlayed&&this.setState({isPlayed:!1},(function(){a.props.pauseTrack(a.props.track)}))}},{key:"componentWillUnmount",value:function(){this.props.isInPlaylist&&this.state.isPlayed&&this.props.pauseTrack(this.props.track)}}]),a}(i.a.Component);function f(e){var t=e.tracks,a=e.isInPlaylist,s=e.addTrack,l=e.removeTrack,n=e.playTrack,r=e.pauseTrack,c=e.isTrackPlayed;return i.a.createElement("div",{className:"TrackList"},t.map((function(e){return i.a.createElement(P,{track:e,key:e.id,isInPlaylist:a,addTrack:s,removeTrack:l,playTrack:n,pauseTrack:r,isTrackPlayed:c})})))}a(30);var v=a(1),T=a.n(v);a(31);function g(e){var t=e.playlist,a=e.handleRemove,s=e.editPlaylist,l=e.areYouSure,n=e.deleteImminent,r=e.linkToPlaylist,c=e.isEdited,o=e.isCurrentPlaylistOnList,h=e.isSavedPlaylistAltered,u=i.a.createElement(d.a,{icon:p.j,size:"xs"}),y=i.a.createElement(d.a,{icon:p.a,size:"xs"}),m=i.a.createElement(d.a,{icon:p.f,size:"xs"}),k=i.a.createElement(d.a,{icon:p.b,size:"xs"});return i.a.createElement("div",{className:"PlaylistListItem"},i.a.createElement("div",{className:"Playlist-information"},i.a.createElement("h3",{className:"PlaylistListItem-link",onClick:r},t.name),i.a.createElement("p",null,"Number of tracks: ",t.tracks)),i.a.createElement("div",{className:"img-container"},i.a.createElement("img",{src:t.images.length>0?t.images[0].url:"",alt:"",onClick:r})),i.a.createElement("button",{className:c?"Playlist-action-disabled":"Playlist-action",onClick:c?null:a},l||n?n?k:m:u),i.a.createElement("button",{className:l||n||c||o&&h?"Playlist-action-disabled":"Playlist-action",onClick:c||o&&h?null:s},y))}var S=function(e){Object(u.a)(a,e);var t=Object(y.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={areYouSure:!1,deleteImminent:!1},s.handleRemove=s.handleRemove.bind(Object(h.a)(s)),s.editPlaylist=s.editPlaylist.bind(Object(h.a)(s)),s.linkToPlaylist=s.linkToPlaylist.bind(Object(h.a)(s)),s}return Object(o.a)(a,[{key:"linkToPlaylist",value:function(){window.open(this.props.playlist.url)}},{key:"editPlaylist",value:function(){this.props.getPlaylistDetails(this.props.playlist)}},{key:"handleRemove",value:function(){var e=this;this.state.areYouSure||this.state.deleteImminent?this.state.areYouSure&&!this.state.deleteImminent?this.setState({deleteImminent:!0},(function(){e.t=setTimeout((function(){e.props.removePlaylist(e.props.playlist)}),3e3)})):this.state.deleteImminent&&this.setState({deleteImminent:!1,areYouSure:!1}):this.setState({areYouSure:!0},(function(){e.t=setTimeout((function(){e.setState({areYouSure:!1})}),5e3)}))}},{key:"render",value:function(){return i.a.createElement(g,{playlist:this.props.playlist,areYouSure:this.state.areYouSure,deleteImminent:this.state.deleteImminent,handleRemove:this.handleRemove,editPlaylist:this.editPlaylist,linkToPlaylist:this.linkToPlaylist,isCurrentPlaylistOnList:this.props.isCurrentPlaylistOnList,isSavedPlaylistAltered:this.props.isSavedPlaylistAltered,isEdited:this.props.playlist.viewedInDetail})}},{key:"componentDidUpdate",value:function(e,t){(t.areYouSure&&!t.deleteImminent||t.deleteImminent)&&clearTimeout(this.t)}}]),a}(i.a.Component);function b(e){var t=e.playlists,a=e.removePlaylist,s=e.getPlaylistDetails,l=e.isSavedPlaylistAltered,n=e.isCurrentPlaylistOnList;return i.a.createElement("div",{className:"PlaylistList"},t.map((function(e){return i.a.createElement(S,{playlist:e,key:e.id,removePlaylist:a,getPlaylistDetails:s,isSavedPlaylistAltered:l,isCurrentPlaylistOnList:n})})))}function O(e){var t=e.tracks,a=e.addTrack,s=e.playTrack,l=e.pauseTrack,n=e.isTrackPlayed,r=e.playlists,c=e.removePlaylist,o=e.hasCheckedForPlaylists,h=e.getPlaylistDetails,u=e.isCurrentPlaylistOnList,y=e.isSavedPlaylistAltered;return i.a.createElement("div",{className:"SearchResults",style:0!==t.length||0!==r.length||o?{}:{display:"none"}},i.a.createElement("h2",null,0===t.length?"No search results":"Search Results:"),i.a.createElement("div",{className:"SearchResults-tracklist",style:0===t.length?{display:"none"}:{}},i.a.createElement(f,{tracks:t,isInPlaylist:!1,addTrack:a,playTrack:s,pauseTrack:l,isTrackPlayed:n})),i.a.createElement("h2",{style:{paddingTop:".88rem"}},0===r.length?"No playlists to display":"My Playlists:"),i.a.createElement("div",{className:"SearchResults-playlists",style:0===t.length?{height:"840px"}:{}},i.a.createElement(b,{playlists:r,removePlaylist:c,getPlaylistDetails:h,isSavedPlaylistAltered:y,isCurrentPlaylistOnList:u})))}g.propTypes={playlist:T.a.object.isRequired,removePlaylist:T.a.func,getPlaylistDetails:T.a.func,isCurrentPlaylistOnList:T.a.bool.isRequired,isSavedPlaylistAltered:T.a.bool.isRequired};a(32);function E(e){var t=e.tracks,a=e.playlistName,s=e.handleListNameChange,l=e.removeTrack,n=e.savePlaylist,r=e.playTrack,c=e.pauseTrack,o=e.isTrackPlayed,h=e.clearPlaylist,u=e.isCurrentPlaylistOnList,y=e.isSavedPlaylistAltered,m=e.handleDelete,k=e.areYouSure,P=e.deleteImminent,v=i.a.createElement(d.a,{icon:p.g}),T=i.a.createElement(d.a,{icon:p.i}),g=i.a.createElement(d.a,{icon:p.j}),S=i.a.createElement(d.a,{icon:p.f}),b=i.a.createElement(d.a,{icon:p.b});return i.a.createElement("div",{className:"Playlist",style:0===t.length?{display:"none"}:{}},i.a.createElement("div",{className:"Playlist-title"},i.a.createElement("input",{value:a,placeholder:"New Playlist",onChange:s}),i.a.createElement("button",{className:0!==t.length||a?"Playlist-title-button":"Playlist-title-button-disabled",onClick:h},T),i.a.createElement("button",{className:u?"Playlist-title-button":"Playlist-title-button-disabled",onClick:u?m:null},k||P?P?b:S:g),i.a.createElement("button",{className:0===t.length||!a||u&&!y?"Playlist-title-button-disabled":"Playlist-title-button",onClick:0===t.length||!a||u&&!y?null:n},v)),i.a.createElement("div",{className:"Playlist-tracklist"},i.a.createElement(f,{tracks:t,isInPlaylist:!0,removeTrack:l,playTrack:r,pauseTrack:c,isTrackPlayed:o})))}var I=function(e){Object(u.a)(a,e);var t=Object(y.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={areYouSure:!1,deleteImminent:!1},s.handleDelete=s.handleDelete.bind(Object(h.a)(s)),s}return Object(o.a)(a,[{key:"handleDelete",value:function(){var e=this;this.state.areYouSure||this.state.deleteImminent?this.state.areYouSure&&!this.state.deleteImminent?this.setState({deleteImminent:!0},(function(){e.t=setTimeout((function(){e.props.removePlaylist("current")}),3e3)})):this.state.deleteImminent&&this.setState({deleteImminent:!1,areYouSure:!1}):this.setState({areYouSure:!0},(function(){e.t=setTimeout((function(){e.setState({areYouSure:!1})}),5e3)}))}},{key:"render",value:function(){return i.a.createElement(E,{tracks:this.props.tracks,playlistName:this.props.playlistName,handleListNameChange:this.props.handleListNameChange,removeTrack:this.props.removeTrack,savePlaylist:this.props.savePlaylist,playTrack:this.props.playTrack,pauseTrack:this.props.pauseTrack,isTrackPlayed:this.props.isTrackPlayed,clearPlaylist:this.props.clearPlaylist,isCurrentPlaylistOnList:this.props.isCurrentPlaylistOnList,isSavedPlaylistAltered:this.props.isSavedPlaylistAltered,handleDelete:this.handleDelete,areYouSure:this.state.areYouSure,deleteImminent:this.state.deleteImminent})}},{key:"componentDidUpdate",value:function(e,t){(t.areYouSure&&!t.deleteImminent||t.deleteImminent)&&clearTimeout(this.t)}}]),a}(i.a.Component);function N(e){var t=e.playlistTracks,a=e.searchTracks,s=e.searchPhrase,l=e.handleSearchChange,n=e.playlistName,r=e.handleListNameChange,c=e.addTrack,o=e.removeTrack,h=e.search,u=e.savePlaylist,y=e.playTrack,d=e.pauseTrack,p=e.isTrackPlayed,k=e.playlists,P=e.clearPlaylist,f=e.removePlaylist,v=e.isCurrentPlaylistOnList,T=e.hasCheckedForPlaylists,g=e.getPlaylistDetails,S=e.isSavedPlaylistAltered;return i.a.createElement("div",null,i.a.createElement("h1",null,"Ja",i.a.createElement("span",{className:"highlight"},"mmm"),"ing"),i.a.createElement("div",{className:"App"},i.a.createElement(m,{searchPhrase:s,handleSearchChange:l,handleClick:h,playlists:k,hasCheckedForPlaylists:T}),i.a.createElement("div",{className:"App-playlist"},i.a.createElement(O,{tracks:a,addTrack:c,playTrack:y,pauseTrack:d,isTrackPlayed:p,playlists:k,removePlaylist:f,hasCheckedForPlaylists:T,getPlaylistDetails:g,isCurrentPlaylistOnList:v,isSavedPlaylistAltered:S}),i.a.createElement(I,{tracks:t,playlistName:n,handleListNameChange:r,removeTrack:o,savePlaylist:u,playTrack:y,pauseTrack:d,isTrackPlayed:p,clearPlaylist:P,isCurrentPlaylistOnList:v,isSavedPlaylistAltered:S,removePlaylist:f}))))}var C={clientId:"20ad80ca3acb46a3ac4dfbfa29dfe2c7",accessToken:"",tokenExpiry:null,redirectURI:"https://pyll-o.github.io/Jammming",generateURLState:function(){sessionStorage.urlState=Math.floor(1e5*Math.random()).toString()},getAccessToken:function(){var e=this;if(window.location.href.match(/state=(\d+)/)[1]===sessionStorage.urlState){this.accessToken=window.location.href.match(/access_token=([^&]+)/)[1],this.tokenExpiry=window.location.href.match(/expires_in=([^&]+)/)[1];var t=Date.now()+1e3*this.tokenExpiry;window.history.pushState("AccessToken",null,"/Jammming"),setTimeout((function(){return e.accessToken=""}),t-Date.now())}},getUserId:function(){return fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer ".concat(this.accessToken)}}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e.id}))},getUserPlaylists:function(){return fetch("https://api.spotify.com/v1/me/playlists",{headers:{Authorization:"Bearer ".concat(this.accessToken)}}).then((function(e){if(e.ok)return e.json()}))},getPlaylistDetails:function(e){var t="https://api.spotify.com/v1/playlists/".concat(e);return fetch(t,{headers:{Authorization:"Bearer ".concat(this.accessToken)}}).then((function(e){if(e.ok)return e.json()}))},createPlaylist:function(e,t){var a="https://api.spotify.com/v1/users/".concat(e,"/playlists"),s=JSON.stringify({name:t});return fetch(a,{method:"POST",headers:{Authorization:"Bearer ".concat(this.accessToken),"Content-Type":"application/json"},body:s}).then((function(e){if(e.ok)return e.json()}))},addPlaylist:function(e,t){var a=this;if(this.accessToken)return this.getUserId().then((function(t){return a.createPlaylist(t,e)})).then((function(e){var s=e.id,i="https://api.spotify.com/v1/playlists/".concat(s,"/tracks"),l=JSON.stringify({uris:t});return fetch(i,{method:"POST",headers:{Authorization:"Bearer ".concat(a.accessToken),"Content-Type":"application/json"},body:l})})).then((function(e){if(e.ok)return e.json()}));this.generateURLState(),this.spotifyLogin(sessionStorage.urlState)},removePlaylist:function(e){var t="https://api.spotify.com/v1/playlists/".concat(e,"/followers");return fetch(t,{method:"DELETE",headers:{Authorization:"Bearer ".concat(this.accessToken)}}).then((function(e){if(e.ok)return e}))},updatePlaylist:function(e,t,a){var s=this;if(this.accessToken){var i="https://api.spotify.com/v1/playlists/".concat(a),l="".concat(i,"/tracks");return fetch(i,{method:"PUT",headers:{Authorization:"Bearer ".concat(this.accessToken),"Content-Type":"application/json"},body:JSON.stringify({name:e})}).then((function(e){if(e.ok)return fetch(l,{method:"PUT",headers:{Authorization:"Bearer ".concat(s.accessToken),"Content-Type":"application/json"},body:JSON.stringify({uris:t})})})).then((function(e){if(e.ok)return e}))}this.generateURLState(),this.spotifyLogin(sessionStorage.urlState)},spotifyLogin:function(e){var t="https://accounts.spotify.com/authorize?client_id=".concat(this.clientId,"&response_type=token&redirect_uri=").concat(encodeURIComponent(this.redirectURI),"&state=").concat(e,"&scope=playlist-modify-public");return!this.accessToken&&(window.location.href=t,!0)},search:function(e){if(e){var t="https://api.spotify.com/v1/search?q=".concat(encodeURIComponent(e),"&type=track");return fetch(t,{headers:{Authorization:"Bearer ".concat(this.accessToken)}}).then((function(e){if(e.ok)return e.json()})).then((function(e){return e.tracks.items}))}}},L=function(e){Object(u.a)(a,e);var t=Object(y.a)(a);function a(e){var s;return Object(c.a)(this,a),(s=t.call(this,e)).state={playlistTracks:[],searchPhrase:"",searchTracks:[],playlistName:"",isTrackPlayed:!1,playlists:[],isCurrentPlaylistOnList:!1,hasCheckedForPlaylists:!1,isSavedPlaylistAltered:!1},s.handleSearchChange=s.handleSearchChange.bind(Object(h.a)(s)),s.handleListNameChange=s.handleListNameChange.bind(Object(h.a)(s)),s.addTrack=s.addTrack.bind(Object(h.a)(s)),s.removeTrack=s.removeTrack.bind(Object(h.a)(s)),s.search=s.search.bind(Object(h.a)(s)),s.handleSearchResponse=s.handleSearchResponse.bind(Object(h.a)(s)),s.savePlaylist=s.savePlaylist.bind(Object(h.a)(s)),s.playTrack=s.playTrack.bind(Object(h.a)(s)),s.pauseTrack=s.pauseTrack.bind(Object(h.a)(s)),s.clearPlaylist=s.clearPlaylist.bind(Object(h.a)(s)),s.getPlaylists=s.getPlaylists.bind(Object(h.a)(s)),s.removePlaylist=s.removePlaylist.bind(Object(h.a)(s)),s.getPlaylistDetails=s.getPlaylistDetails.bind(Object(h.a)(s)),s.handlePlaylistDetails=s.handlePlaylistDetails.bind(Object(h.a)(s)),s}return Object(o.a)(a,[{key:"handleSearchChange",value:function(e){var t=e.target;this.setState({searchPhrase:t.value})}},{key:"search",value:function(){var e=this;C.generateURLState(),sessionStorage.searchPhrase=this.state.searchPhrase,sessionStorage.playlistName=this.state.playlistName,sessionStorage.playlistTracks=JSON.stringify(this.state.playlistTracks);var t=C.spotifyLogin(sessionStorage.urlState);!t&&this.state.searchPhrase?(C.search(this.state.searchPhrase).then((function(t){return e.handleSearchResponse(t)})),this.getPlaylists()):t||this.state.searchPhrase||this.getPlaylists()}},{key:"handleSearchResponse",value:function(e){var t=this,a=e.map((function(e){return{title:e.name,artist:e.artists[0].name,album:e.album.name,id:e.id,URI:e.uri,preview:e.preview_url,doubledInPlaylist:!1,url:e.external_urls.spotify,artistUrl:e.artists[0].external_urls.spotify,albumUrl:e.album.external_urls.spotify}})).filter((function(e){return!t.state.playlistTracks.map((function(e){return e.id})).includes(e.id)}));this.setState({searchTracks:a,searchPhrase:"",isTrackPlayed:!1})}},{key:"handleListNameChange",value:function(e){var t=e.target;this.setState({playlistName:t.value})}},{key:"handlePlaylistDetails",value:function(e){var t=e.name,a=e.tracks.items.map((function(e){return{title:e.track.name,artist:e.track.artists[0].name,album:e.track.album.name,id:e.track.id,URI:e.track.uri,doubledInPlaylist:!0,preview:e.track.preview_url,url:e.track.external_urls.spotify,artistUrl:e.track.artists[0].external_urls.spotify,albumUrl:e.track.album.external_urls.spotify}})),s=this.state.searchTracks;if(s.length>0){var i=s.map((function(e){return e.id}));s.forEach((function(e){e.doubledInPlaylist=!1})),a.forEach((function(e){console.log(e);var t=i.indexOf(e.id);t>-1&&(s[t].doubledInPlaylist=!0)}))}this.setState({playlistName:t,playlistTracks:a,searchTracks:s,isCurrentPlaylistOnList:!0})}},{key:"getPlaylists",value:function(){var e=this;this.state.isCurrentPlaylistOnList||C.getUserPlaylists().then((function(t){var a=t.items.map((function(e){return{id:e.id,name:e.name,tracks:e.tracks.total,images:e.images,viewedInDetail:!1,url:e.external_urls.spotify}}));e.setState({playlists:a,hasCheckedForPlaylists:!0})}))}},{key:"savePlaylist",value:function(){var e=this,t=this.state.playlistTracks.map((function(e){return e.URI}));if(t.length>0)if(sessionStorage.uriArr=JSON.stringify(t),sessionStorage.playlistName=this.state.playlistName,sessionStorage.playlistTracks=JSON.stringify(this.state.playlistTracks),this.state.isCurrentPlaylistOnList){var a=this.state.playlists.filter((function(e){return e.viewedInDetail}))[0].id;sessionStorage.editedPlaylistId=a,C.updatePlaylist(sessionStorage.playlistName,JSON.parse(sessionStorage.uriArr),sessionStorage.editedPlaylistId).then((function(){sessionStorage.editedPlaylistId="",e.getPlaylists(),e.clearPlaylist()}))}else C.addPlaylist(sessionStorage.playlistName,JSON.parse(sessionStorage.uriArr)).then((function(){e.getPlaylists(),e.clearPlaylist()}))}},{key:"clearPlaylist",value:function(){var e=this;this.setState({playlistTracks:[],playlistName:"",searchPhrase:sessionStorage.searchPhrase,isCurrentPlaylistOnList:!1,isSavedPlaylistAltered:!1},(function(){e.search()}))}},{key:"removePlaylist",value:function(e){var t=this;if("current"===e){C.generateURLState();var a=this.state.playlists.filter((function(e){return e.viewedInDetail}))[0].id;sessionStorage.playlistToDeleteId=a,sessionStorage.searchTracks=JSON.stringify(this.state.searchTracks),sessionStorage.playlistName=this.state.playlistName,sessionStorage.playlistTracks=JSON.stringify(this.state.playlistTracks),C.spotifyLogin(sessionStorage.urlState)||(C.removePlaylist(sessionStorage.playlistToDeleteId).then((function(){t.clearPlaylist()})),sessionStorage.playlistToDeleteId="",sessionStorage.searchTracks=[])}else{C.generateURLState(),sessionStorage.playlistToRemoveId=e.id,sessionStorage.searchTracks=JSON.stringify(this.state.searchTracks),sessionStorage.playlistName=this.state.playlistName,sessionStorage.playlistTracks=JSON.stringify(this.state.playlistTracks),C.spotifyLogin(sessionStorage.urlState)||(C.removePlaylist(sessionStorage.playlistToRemoveId).then((function(){t.getPlaylists()})),sessionStorage.playlistToRemoveId="",sessionStorage.searchTracks=[])}}},{key:"getPlaylistDetails",value:function(e){var t=this,a=this.state.playlists,s=a.map((function(e){return e.id})),i=this.state.playlists.indexOf(e),l=a.filter((function(e){return e.viewedInDetail}));if(l.length>0){var n=l[0].id;a[s.indexOf(n)].viewedInDetail=!1}a[i].viewedInDetail=!0,this.setState({playlists:a},(function(){C.generateURLState(),sessionStorage.playlistToEditId=e.id,sessionStorage.searchTracks=JSON.stringify(t.state.searchTracks),C.spotifyLogin(sessionStorage.urlState)||(C.getPlaylistDetails(sessionStorage.playlistToEditId).then((function(e){return t.handlePlaylistDetails(e)})),sessionStorage.playlistToEditId="",sessionStorage.searchTracks=[])}))}},{key:"addTrack",value:function(e){if(!this.state.playlistTracks.map((function(e){return e.id})).includes(e.id)){var t=this.state.searchTracks,a=t.map((function(e){return e.id})).indexOf(e.id);t[a].doubledInPlaylist=!0,e.doubledInPlaylist=!0,this.setState((function(a){return{searchTracks:t,playlistTracks:[].concat(Object(r.a)(a.playlistTracks),[e])}})),this.state.isCurrentPlaylistOnList&&this.setState({isSavedPlaylistAltered:!0})}}},{key:"playTrack",value:function(e){this.state.isTrackPlayed||this.setState({isTrackPlayed:!0},(function(){document.getElementById(e.id).play()}))}},{key:"pauseTrack",value:function(e){this.state.isTrackPlayed?this.setState({isTrackPlayed:!1},(function(){document.getElementById(e.id).pause()})):null!==e&&document.getElementById(e.id).pause()}},{key:"removeTrack",value:function(e){var t=this.state.searchTracks,a=t.map((function(e){return e.id})),s=this.state.playlistTracks.filter((function(t){return t.id!==e.id}));a.includes(e.id)?(t[a.indexOf(e.id)].doubledInPlaylist=!1,this.setState({searchTracks:t,playlistTracks:s})):this.setState({playlistTracks:s});this.state.isCurrentPlaylistOnList&&this.setState({isSavedPlaylistAltered:!0})}},{key:"render",value:function(){return i.a.createElement(N,{playlistTracks:this.state.playlistTracks,searchTracks:this.state.searchTracks,searchPhrase:this.state.searchPhrase,handleSearchChange:this.handleSearchChange,playlistName:this.state.playlistName,handleListNameChange:this.handleListNameChange,addTrack:this.addTrack,removeTrack:this.removeTrack,search:this.search,savePlaylist:this.savePlaylist,playTrack:this.playTrack,pauseTrack:this.pauseTrack,isTrackPlayed:this.state.isTrackPlayed,playlists:this.state.playlists,clearPlaylist:this.clearPlaylist,removePlaylist:this.removePlaylist,isCurrentPlaylistOnList:this.state.isCurrentPlaylistOnList,hasCheckedForPlaylists:this.state.hasCheckedForPlaylists,getPlaylistDetails:this.getPlaylistDetails,isSavedPlaylistAltered:this.state.isSavedPlaylistAltered})}},{key:"componentDidMount",value:function(){var e=this;window.location.href.match(/access_token=/)&&(C.getAccessToken(),this.setState({searchPhrase:sessionStorage.searchPhrase,searchTracks:!sessionStorage.searchPhrase&&sessionStorage.searchTracks?JSON.parse(sessionStorage.searchTracks):[],playlistName:sessionStorage.playlistName,playlistTracks:JSON.parse(sessionStorage.playlistTracks)},(function(){e.getPlaylists(),e.state.searchPhrase&&C.search(e.state.searchPhrase).then((function(t){return e.handleSearchResponse(t)})),sessionStorage.playlistToRemoveId&&(C.removePlaylist(sessionStorage.playlistToRemoveId).then((function(){e.getPlaylists()})),sessionStorage.playlistToRemoveId="",sessionStorage.searchTracks=[]),sessionStorage.playlistToDeleteId&&(C.removePlaylist(sessionStorage.playlistToDeleteId).then((function(){e.clearPlaylist()})),sessionStorage.playlistToDeleteId="",sessionStorage.searchTracks=[]),sessionStorage.playlistToEditId&&(C.getPlaylistDetails(sessionStorage.playlistToEditId).then((function(t){return e.handlePlaylistDetails(t)})),sessionStorage.playlistToEditId="",sessionStorage.searchTracks=[]),sessionStorage.editedPlaylistId&&C.updatePlaylist(sessionStorage.playlistName,JSON.parse(sessionStorage.uriArr),sessionStorage.editedPlaylistId).then((function(){sessionStorage.editedPlaylistId="",e.getPlaylists(),e.clearPlaylist()}))})))}}]),a}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[14,1,2]]]);
//# sourceMappingURL=main.a9d939e2.chunk.js.map